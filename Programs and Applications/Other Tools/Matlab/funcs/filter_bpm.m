function y = filter_bpm(x)
%filter_bpm Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.10 and DSP System Toolbox 9.12.
% Generated on: 14-Apr-2021 19:04:13

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fstop1 = 0.6;  % First Stopband Frequency
    % Fpass1 = 0.7;  % First Passband Frequency
    % Fpass2 = 10;   % Second Passband Frequency
    % Fstop2 = 11;   % Second Stopband Frequency
    % Astop1 = 60;   % First Stopband Attenuation (dB)
    % Apass  = 1;    % Passband Ripple (dB)
    % Astop2 = 80;   % Second Stopband Attenuation (dB)
    % Fs     = 60;   % Sampling Frequency
    %
    % h = fdesign.bandpass('fst1,fp1,fp2,fst2,ast1,ap,ast2', Fstop1, Fpass1, ...
    %                      Fpass2, Fstop2, Astop1, Apass, Astop2, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 0 -1 1 -0.970658223463122 0.968754482972464; 1 0 -1 ...
        1 -1.99209024801434 0.997356018116839; 1 0 -1 1 -0.941748599934276 ...
        0.909141717139524; 1 0 -1 1 -1.9868331454837 0.992088524475343; 1 0 -1 1 ...
        -0.915057680130636 0.853140838556801; 1 0 -1 1 -1.98159889687875 ...
        0.986847425120511; 1 0 -1 1 -0.890422805105479 0.800501578271081; 1 0 -1 ...
        1 -1.97638651289555 0.981631705415696; 1 0 -1 1 -0.867695714096768 ...
        0.750995397216206; 1 0 -1 1 -1.97119510486304 0.976440453834557; 1 0 -1 ...
        1 -0.846741150121043 0.704413528989735; 1 0 -1 1 -1.96602391881244 ...
        0.971272895668879; 1 0 -1 1 -0.82743559419768 0.660565204963979; 1 0 -1 ...
        1 -1.96087237146945 0.966128428516828; 1 0 -1 1 -0.809666116596083 ...
        0.619276047963649; 1 0 -1 1 -1.95574008901446 0.961006660384805; 1 0 -1 ...
        1 -0.793329333722092 0.58038662078086; 1 0 -1 1 -1.9506269495009 ...
        0.955907451275414; 1 0 -1 1 -1.94553312987958 0.95083095918706; 1 0 -1 1 ...
        -0.778330459691497 0.543751116217902; 1 0 -1 1 -1.94045915864645 ...
        0.945777691514967; 1 0 -1 1 -0.764582442188628 0.509236176004913; 1 0 -1 ...
        1 -1.93540597520943 0.940748562915613; 1 0 -1 1 -0.752005172815968 ...
        0.47671982673002; 1 0 -1 1 -1.93037499714965 0.935744960770766; 1 0 -1 1 ...
        -0.740524762768793 0.446090521771651; 1 0 -1 1 -1.92536819662665 ...
        0.930768819455414; 1 0 -1 1 -0.730072875296407 0.417246279085806; 1 0 -1 ...
        1 -1.92038818723105 0.925822704662388; 1 0 -1 1 -0.720586107032963 ...
        0.390093905540523; 1 0 -1 1 -1.91543832260381 0.920909909047398; 1 0 -1 ...
        1 -0.712005410904228 0.364548299281617; 1 0 -1 1 -1.91052280808858 ...
        0.916034560402695; 1 0 -1 1 -0.704275553964086 0.340531822341996; 1 0 -1 ...
        1 -1.90564682652369 0.911201743408071; 1 0 -1 1 -0.697344604223555 ...
        0.317973736360528; 1 0 -1 1 -1.90081667895681 0.906417635689396; 1 0 -1 ...
        1 -0.691163441361462 0.296809694847928; 1 0 -1 1 -1.8960399405015 ...
        0.90168965836457; 1 0 -1 1 -0.685685287226172 0.27698128592129; 1 0 -1 1 ...
        -1.89132563065317 0.897026640379325; 1 0 -1 1 -0.680865253354282 ...
        0.258435619822302; 1 0 -1 1 -1.88668439601519 0.892438994609585; 1 0 -1 ...
        1 -0.676659904472278 0.241124955835366; 1 0 -1 1 -1.88212870140584 ...
        0.887938901789758; 1 0 -1 1 -0.673026839264226 0.225006363431871; 1 0 -1 ...
        1 -1.87767302255885 0.883540495660565; 1 0 -1 1 -0.669924292749067 ...
        0.21004141259148; 1 0 -1 1 -1.87333402994067 0.879260039167612; 1 0 -1 1 ...
        -0.667310768572798 0.19619588830338; 1 0 -1 1 -1.86913074848927 ...
        0.875116076992884; 1 0 -1 1 -0.66514471448313 0.183439524253841; 1 0 -1 ...
        1 -1.86508467237299 0.871129544204862; 1 0 -1 1 -0.663384260180319 ...
        0.171745750702102; 1 0 -1 1 -1.86121980747061 0.867323804660567; 1 0 -1 ...
        1 -0.661987043331828 0.161091451596881; 1 0 -1 1 -1.85756260790206 ...
        0.863724586675125; 1 0 -1 1 -0.660910156088193 0.151456726180679; 1 0 -1 ...
        1 -1.85414176789543 0.860359778649905; 1 0 -1 1 -0.66011024964134 ...
        0.142824650786577; 1 0 -1 1 -1.85098782857101 0.857259045756397; 1 0 -1 ...
        1 -0.659543836216031 0.135181037391497; 1 0 -1 1 -1.84813256351629 ...
        0.854453232969025; 1 0 -1 1 -0.659167823723639 0.128514186890503; 1 0 -1 ...
        1 -1.84560812021581 0.851973532512572; 1 0 -1 1 -0.65894030523729 ...
        0.12281463709852; 1 0 -1 1 -1.84344591871744 0.849850417279284; 1 0 -1 1 ...
        -0.658821601239052 0.118074908169194; 1 0 -1 1 -1.84167534450958 ...
        0.848112376105294; 1 0 -1 1 -0.658775517098493 0.114289251278172; 1 0 -1 ...
        1 -1.84032231594043 0.846784528583698; 1 0 -1 1 -0.6587707349785 ...
        0.111453409661464; 1 0 -1 1 -1.83940784954315 0.8458872385342; 1 0 -1 1 ...
        -0.658782216419769 0.109564403823101; 1 0 -1 1 -1.83894677747049 ...
        0.845434874916907; 1 0 -1 1 -0.658792461097814 0.108620354205229], ...
        'ScaleValues', [0.467783573300034; 0.467783573300034; ...
        0.460077847516205; 0.460077847516205; 0.452759159049597; ...
        0.452759159049597; 0.445808161480366; 0.445808161480366; ...
        0.439206780996696; 0.439206780996696; 0.432938139784758; ...
        0.432938139784758; 0.426986482223513; 0.426986482223513; ...
        0.421337104406835; 0.421337104406835; 0.41597628730812; ...
        0.41597628730812; 0.410891233748695; 0.410891233748695; ...
        0.406070009218647; 0.406070009218647; 0.401501486517392; ...
        0.401501486517392; 0.397175294124057; 0.397175294124057; ...
        0.393081768168671; 0.393081768168671; 0.389211907849864; ...
        0.389211907849864; 0.385557334129726; 0.385557334129726; ...
        0.382110251529154; 0.382110251529154; 0.378863412845205; ...
        0.378863412845205; 0.375810086614332; 0.375810086614332; ...
        0.372944027150499; 0.372944027150499; 0.370259446994354; ...
        0.370259446994354; 0.367750991618078; 0.367750991618078; ...
        0.365413716239732; 0.365413716239732; 0.363243064610617; ...
        0.363243064610617; 0.361234849648928; 0.361234849648928; ...
        0.359385235802741; 0.359385235802741; 0.357690723034929; ...
        0.357690723034929; 0.356148132331915; 0.356148132331915; ...
        0.354754592647078; 0.354754592647078; 0.353507529198305; ...
        0.353507529198305; 0.352404653047325; 0.352404653047325; ...
        0.351443951896426; 0.351443951896426; 0.350623682045579; ...
        0.350623682045579; 0.349942361460267; 0.349942361460267; ...
        0.349398763907153; 0.349398763907153; 0.348991914121378; ...
        0.348991914121378; 0.348721083975669; 0.348721083975669; ...
        0.348585789627627; 0.348585789627627; 1]);
end
s = double(x);
y = step(Hd,x);

